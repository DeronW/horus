!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("js-cookie"),require("js-base64"),require("ua-parser-js")):"function"==typeof define&&define.amd?define(["js-cookie","js-base64","ua-parser-js"],t):"object"==typeof exports?exports.Horus=t(require("js-cookie"),require("js-base64"),require("ua-parser-js")):e.Horus=t(e.JSCookie,e.JSBase64,e.UAParser)}(window,function(e,t,o){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=14)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){if(""!==t.id)return'//*[@id="'+t.id+'"]';if(t===document.body)return"/html/body";var o=1,r="";return Array.prototype.slice.call(t.parentNode.childNodes).forEach(function(n){n===t?((r=e(t.parentNode))&&(r+="/"),r+=t.tagName.toLowerCase()+"["+o+"]"):1===n.nodeType&&n.tagName===t.tagName&&(o+=1)}),1===o&&r&&(r=r.substr(0,r.length-3)),r}},function(t,o){t.exports=e},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=o(1),u=(r=n)&&r.__esModule?r:{default:r};var i="__HORUS_USER_ID";t.default={geUserID:function(){var e=u.default.get(i);if(!e){e="anonym."+((new Date).getTime()/1e3+Math.random());var t=location.host.split("."),o=["*"];o[2]=t.pop(),o[1]=t.pop(),u.default.set(i,e,{expires:2555,domain:o.join(".")})}return e},getAccountID:function(){return u.default.get("account_id")}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,o=0;return function(r){var n=(new Date).getTime();n-o>t&&(e(r),o=n)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=o(0),u=(r=n)&&r.__esModule?r:{default:r};t.default=function(e){for(var t,o=!1,r=e.target;r&&r!=document;){if(r.getAttribute("data-horus")){o=!0;break}r=r.parentNode}if(o)return{event:"hover",title:(t=e.target,t.innerText),desc:(e.target,"TODO"),xpath:(0,u.default)(e.target)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=o(0),u=(r=n)&&r.__esModule?r:{default:r};t.default=function(e){e.target;var t=function(e){if(e==document.body)return{mark:"click:body",text:"pointless click"};var t=void 0,o=e.innerText.substr(0,20),r=function(e,t){for(;e&&e!=document;){var o=e.getAttribute("ho-click");if(o)return o;e=e.parentNode}}(e);if(r){var n=r.split(":");t=n[0],n[1]&&(o=n[1])}return{mark:"click"+(t?":"+t:""),text:o}}(e.target);return{mark:t.mark,desc:t.text,xpath:(0,u.default)(e.target),pageX:e.pageX,pageY:e.pageY}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(o(5)),n=u(o(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default={Click:r.default,Hover:n.default}},function(e,t,o){"use strict";function r(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),new Promise(function(e,o){t.onload=function(){t.status<300?e():o()},t.send()})}function n(e){var t=document.createElement("img");return t.style.display="none",new Promise(function(o){t.onload=function(){document.body.removeChild(t),o()},t.src=e,document.body.appendChild(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"image"==e?n(t):r(t)},t.ImageRequest=n,t.AjaxRequest=r},function(e,o){e.exports=t},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(8);t.default=function(e){return"object"==(void 0===e?"undefined":r(e))&&(e=JSON.stringify(e)),n.Base64.encode(e)}},function(e,t){e.exports=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=o(10),u=(r=n)&&r.__esModule?r:{default:r};t.default={Properties:function(e){var t=new u.default(e||navigator.userAgent).getResult();return{user_brand:t.device.vendor,user_explorer:t.browser.name+"/"+t.browser.version,user_model:t.device.model,user_os:t.os.name+"/"+t.os.version}}}},function(e,t,o){"use strict";
/*!
 * Horus version x.x.x
 * @license  BSD
 */},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();o(12);var u=f(o(11)),i=f(o(9)),a=f(o(7)),s=f(o(6)),c=f(o(3)),d=f(o(2));function f(e){return e&&e.__esModule?e:{default:e}}function l(){var e;(e=window.console).log.apply(e,arguments)}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._done=!1,this.opt=Object.assign({url:"",project:"Empty",account_id:d.default.getAccountID(),debug:!1,request_type:"auto",listen:{click:!0,hover:!0,history:!1,scroll:!1}},t),this.listners={click:[s.default.Click],hover:[s.default.Hover],history:[s.default.History],scroll:[]}}return n(e,[{key:"_setOption",value:function(e,t){this.opt.hasOwnProperty(e)?this.opt[e]=t:l("Horus config: "+e+" has been ignored")}},{key:"setConfig",value:function(e,t){var o="object"===(void 0===e?"undefined":r(e))?e:function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}({},e,t);for(var n in o)this._setOption(n,o[n])}},{key:"ready",value:function(e){"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()},!1)}},{key:"observe",value:function(){this.observer=new MutationObserver(function(e){e.forEach(function(e){l(e.target),l(e.addedNodes),l(e.removedNodes)})}),this.observer.observe(document.body,{childList:!0,attributes:!0,subtree:!0})}},{key:"addListener",value:function(e,t){if(!this.listners[e])throw Error("Horus: 没有这种监听类型");this.listners[e].push(t)}},{key:"dispatch",value:function(e,t){var o=this;(this.listners[e]||[]).forEach(function(r){if("function"==typeof r){var n=r(t);n&&o._report(e,n)}})}},{key:"start",value:function(){var e=this;if(this._done)throw Error("Horus 不能重复监听全局事件");return this._done=!0,this.opt.listen.click&&document.addEventListener("click",function(t){return e.dispatch("click",t)}),this.opt.listen.hover&&document.addEventListener("mouseover",(0,c.default)(function(e){this.dispatch("hover",e)}.bind(this),300)),this}},{key:"decorator",value:function(e,t){var o={time:(new Date).getTime(),project:this.opt.project,event_id:(new Date).getTime()+"-"+Math.random().toString().substr(2),event:e,properties:Object.assign({cookie:"",account_id:d.default.getAccountID(),user_id:d.default.geUserID()},u.default.Properties()),custom:t};if(o.custom.mark){var r=o.custom.mark.split(":");r[0]&&(o.event_type=r[0])}return this.opt.debug&&(l("Horus reporting: ",o),l(o.custom.xpath)),o}},{key:"occur",value:function(e,t){this._report(e,t)}},{key:"_report",value:function(e,t){var o=this.opt.url;o.indexOf("?")<0&&(o+="?"),o+="&data="+(0,i.default)(this.decorator(e,t)),o+="&_="+(new Date).getTime(),(0,a.default)(this.request_type,o)}}]),e}();t.default=p},function(e,t,o){"use strict";var r,n=o(13),u=(r=n)&&r.__esModule?r:{default:r};var i="$horus";document.addEventListener("DOMContentLoaded",function(){var e=window._FPP_Horus_Config||{};e.alias&&(i=e.alias,delete e.alias),window._FPP_Horus=new u.default(e).start(),i&&void 0===window[i]&&(window[i]=window._FPP_Horus)})}])});